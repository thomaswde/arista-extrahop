<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arista + ExtraHop Solution Architecture</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #261F63 0%, #7F2854 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: #FFFFFF;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #898A8D;
        }
        
        h1 {
            color: #261F63;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #898A8D;
            font-size: 1.2em;
        }
        
        .architecture-diagram {
            background: linear-gradient(to bottom, #f5f7fa, #e8eaf0);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 40px;
            position: relative;
        }
        
        .flow-container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .component-box {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: relative;
            transition: transform 0.3s ease;
        }
        
        .component-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .arista-network {
            border-top: 4px solid #F05918;
        }
        
        .arista-broker {
            border-top: 4px solid #00AAEF;
        }
        
        .extrahop {
            border-top: 4px solid #DAED43;
        }
        
        .component-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .vendor-badge {
            background: linear-gradient(135deg, #7F2854 0%, #EC0889 100%);
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.75em;
            font-weight: normal;
        }
        
        .component-subtitle {
            color: #898A8D;
            font-size: 0.9em;
            margin-bottom: 15px;
            font-style: italic;
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 5px 0;
            color: #000000;
            font-size: 0.95em;
            display: flex;
            align-items: flex-start;
        }
        
        .feature-list li::before {
            content: "✓";
            color: #DAED43;
            font-weight: bold;
            margin-right: 8px;
            flex-shrink: 0;
        }
        
        .flow-arrow {
            position: absolute;
            top: 50%;
            right: -25px;
            transform: translateY(-50%);
            width: 40px;
            height: 3px;
            background: #898A8D;
            z-index: 1;
        }
        
        .flow-arrow::after {
            content: '';
            position: absolute;
            right: -8px;
            top: -5px;
            width: 0;
            height: 0;
            border-left: 12px solid #898A8D;
            border-top: 7px solid transparent;
            border-bottom: 7px solid transparent;
        }
        
        .detailed-flow {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
        }
        
        .flow-diagram-title {
            color: #261F63;
            font-size: 1.4em;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }
        
        .data-flow-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        
        .flow-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            border-left: 4px solid #00AAEF;
        }
        
        .flow-card-title {
            color: #261F63;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .flow-details {
            color: #898A8D;
            line-height: 1.6;
        }
        
        .integration-section {
            background: linear-gradient(to right, rgba(218,237,67,0.1), rgba(218,237,67,0.05));
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid #DAED43;
        }
        
        .integration-title {
            color: #261F63;
            font-size: 1.3em;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .integration-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .integration-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #DAED43;
        }
        
        .integration-icon {
            font-size: 2em;
            margin-bottom: 10px;
            color: #7F2854;
        }
        
        .capability-matrix {
            margin-top: 40px;
        }
        
        .matrix-title {
            color: #261F63;
            font-size: 1.5em;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }
        
        .capability-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .capability-table th {
            background: linear-gradient(135deg, #261F63 0%, #7F2854 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .capability-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #898A8D;
            color: #000000;
        }
        
        .capability-table tr:hover {
            background: #f5f5f5;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
        }
        
        .status-native {
            background: rgba(218,237,67,0.3);
            color: #000000;
        }
        
        .status-partial {
            background: rgba(240,89,24,0.2);
            color: #000000;
        }
        
        .status-requires {
            background: rgba(236,0,137,0.1);
            color: #000000;
        }
        
        .workflow-section {
            background: linear-gradient(to right, rgba(127,40,84,0.05), rgba(236,0,137,0.05));
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid #EC0889;
        }
        
        .workflow-title {
            color: #7F2854;
            font-size: 1.3em;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .workflow-step {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
        }
        
        .workflow-number {
            background: #EC0889;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .workflow-content {
            flex: 1;
        }
        
        .workflow-action {
            font-weight: bold;
            color: #7F2854;
            margin-bottom: 5px;
        }
        
        .workflow-detail {
            color: #898A8D;
            font-size: 0.95em;
        }
        
        .critical-note {
            background: rgba(240,89,24,0.1);
            border-left: 4px solid #F05918;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .critical-note-title {
            color: #F05918;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .critical-note-text {
            color: #000000;
        }
        
        .success-note {
            background: rgba(218,237,67,0.1);
            border-left: 4px solid #DAED43;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .success-note-title {
            color: #261F63;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .success-note-text {
            color: #000000;
        }
        
        .optimization-section {
            background: linear-gradient(to right, rgba(0,170,239,0.05), rgba(0,170,239,0.02));
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid #00AAEF;
        }
        
        .optimization-title {
            color: #261F63;
            margin-bottom: 15px;
            font-weight: bold;
            font-size: 1.3em;
        }
        
        .optimization-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        .optimization-column h4 {
            color: #7F2854;
            margin-bottom: 10px;
        }
        
        .optimization-column ul {
            color: #000000;
            line-height: 1.8;
            list-style: none;
            padding: 0;
        }
        
        .summary-box {
            background: linear-gradient(135deg, #261F63 0%, #7F2854 100%);
            color: white;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
        }
        
        .summary-title {
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        
        .summary-content {
            line-height: 1.8;
            font-size: 1.05em;
        }
        
        .summary-note {
            margin-top: 15px;
            font-size: 0.95em;
            opacity: 0.95;
        }
        
        @media (max-width: 1200px) {
            .flow-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .flow-arrow {
                display: none;
            }
            
            .data-flow-grid,
            .integration-grid,
            .optimization-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Arista + ExtraHop Solution Architecture</h1>
            <p class="subtitle">Comprehensive Network Visibility with Integrated Packet Processing</p>
        </div>

        <!-- Main Architecture Flow -->
        <div class="architecture-diagram">
            <div class="flow-diagram-title">End-to-End Traffic Flow & Responsibility Matrix</div>
            
            <div class="flow-container">
                <!-- Arista Network Role -->
                <div class="component-box arista-network">
                    <div class="flow-arrow"></div>
                    <div class="component-title">
                        Network Layer
                        <span class="vendor-badge">Arista Switches</span>
                    </div>
                    <div class="component-subtitle">Traffic Access & Replication</div>
                    <ul class="feature-list">
                        <li>SPAN/Mirror configuration</li>
                        <li>ERSPAN for remote capture</li>
                        <li>Timestamping at ingress</li>
                        <li>VLAN-based mirroring</li>
                        <li>Selective port mirroring</li>
                    </ul>
                </div>

                <!-- Arista Broker Role -->
                <div class="component-box arista-broker">
                    <div class="flow-arrow"></div>
                    <div class="component-title">
                        Broker Layer
                        <span class="vendor-badge">Arista DANZ</span>
                    </div>
                    <div class="component-subtitle">Traffic Optimization & Distribution</div>
                    <ul class="feature-list">
                        <li><strong>Deduplication</strong> (critical for accurate metrics)</li>
                        <li><strong>Fan-out</strong>&nbsp;to multiple ExtraHop appliances</li>
                        <li><strong>Filtering</strong> (L2-L4, some L7)</li>
                        <li><strong>Packet slicing</strong>&nbsp;for&nbsp;Packetstore</li>
                        <li>Load balancing & aggregation</li>
                        <li>Traffic steering rules</li>
                    </ul>
                </div>

                <!-- ExtraHop Analyzer -->
                <div class="component-box extrahop">
                    <div class="component-title">
                        Analysis Layer
                        <span class="vendor-badge">ExtraHop</span>
                    </div>
                    <div class="component-subtitle">Detection, Monitoring & Forensics</div>
                    <ul class="feature-list">
                        <li><strong>Sensor:</strong> Full packet analysis</li>
                        <li><strong>Packetstore:</strong> Selective capture</li>
                        <li>TCP stream reassembly</li>
                        <li>Encrypted traffic decryption</li>
                        <li>Device discovery</li>
                        <li>Behavioral analytics</li>
                    </ul>
                </div>
            </div>

            <!-- Detailed Data Flows -->
            <div class="detailed-flow">
                <div class="flow-diagram-title">Optimized Traffic Distribution Strategy</div>
                
                <div class="data-flow-grid">
                    <div class="flow-card">
                        <div class="flow-card-title">→ ExtraHop Sensor (100% Clean Traffic)</div>
                        <div class="flow-details">
                            <strong>Requirements:</strong><br>
                            • Strongly prefer deduplicated packets for accurate metrics<br>
                            • ExtraHop can handle duplicates within 1ms if concurrent<br>
                            • Needs complete packets - NO slicing or header stripping<br>
                            • Full TCP stream reassembly capability<br>
                            • Creates flow Records for data lake<br>
                            • Discards packets after processing<br><br>
                            <strong>Arista DANZ Processing:</strong><br>
                            • Complete deduplication at line rate (recommended)<br>
                            • Preserve all packet data<br>
                            • Distribute via fan-out if multiple Sensors
                        </div>
                    </div>

                    <div class="flow-card">
                        <div class="flow-card-title">→ ExtraHop Packetstore (30-40% Selective)</div>
                        <div class="flow-details">
                            <strong>Optimization Strategy:</strong><br>
                            • CAN accept sliced packets (headers only for low-value)<br>
                            • Store high-value traffic completely<br>
                            • Consider filtering encrypted 3rd party traffic where possible<br>
                            • Skip heavy backup traffic<br>
                            • Sensor retains decryption keys for download<br><br>
                            <strong>Arista DANZ Processing:</strong><br>
                            • Filter out known-useless traffic<br>
                            • Slice low-medium value packets<br>
                            • Preserve full packets for decryptable traffic
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Integration Points -->
        <div class="integration-section">
            <div class="integration-title">ExtraHop Decryption Integration Points</div>
            <div class="integration-grid">
                <div class="integration-item">
                    <div class="integration-icon">AD</div>
                    <strong>Active Directory</strong><br>
                    <span style="color: #898A8D; font-size: 0.9em;">Kerberos keys for SMB, RPC, etc.</span>
                </div>
                <div class="integration-item">
                    <div class="integration-icon">F5</div>
                    <strong>F5 LTM</strong><br>
                    <span style="color: #898A8D; font-size: 0.9em;">SSL keys via iRule</span>
                </div>
                <div class="integration-item">
                    <div class="integration-icon">SA</div>
                    <strong>Server Agents</strong><br>
                    <span style="color: #898A8D; font-size: 0.9em;">Session key forwarders</span>
                </div>
            </div>
            <p style="margin-top: 15px; color: #898A8D; text-align: center;">
                Note: Sensor holds keys and provides them when user downloads PCAP with decryption
            </p>
        </div>

        <!-- Capability Matrix -->
        <div class="capability-matrix">
            <div class="matrix-title">Arista DANZ Monitoring Fabric - Capability Assessment</div>
            
            <table class="capability-table">
                <thead>
                    <tr>
                        <th>Capability</th>
                        <th>Arista DANZ Status</th>
                        <th>ExtraHop Requirement</th>
                        <th>Impact/Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Deduplication</strong></td>
                        <td><span class="status-badge status-native">Native Support</span></td>
                        <td>Strongly recommended</td>
                        <td>Prevents false TCP retransmission metrics</td>
                    </tr>
                    <tr>
                        <td><strong>Fan-out (1:N)</strong></td>
                        <td><span class="status-badge status-native">Native Support</span></td>
                        <td>Required for dual targets</td>
                        <td>Supports Sensor + Packetstore distribution</td>
                    </tr>
                    <tr>
                        <td><strong>L2-L4 Filtering</strong></td>
                        <td><span class="status-badge status-native">Native Support</span></td>
                        <td>Essential for optimization</td>
                        <td>IP, port, protocol-based filtering</td>
                    </tr>
                    <tr>
                        <td><strong>Packet Slicing</strong></td>
                        <td><span class="status-badge status-native">Native Support</span></td>
                        <td>Useful for Packetstore</td>
                        <td>Configurable slice offset</td>
                    </tr>
                    <tr>
                        <td><strong>Application (L7) Filtering</strong></td>
                        <td><span class="status-badge status-partial">Limited Support</span></td>
                        <td>Nice to have</td>
                        <td>Basic pattern matching only</td>
                    </tr>
                    <tr>
                        <td><strong>SSL/TLS Decryption</strong></td>
                        <td><span class="status-badge status-requires">Not Available</span></td>
                        <td>Not required (ExtraHop handles)</td>
                        <td>ExtraHop performs out-of-band decryption</td>
                    </tr>
                    <tr>
                        <td><strong>Load Balancing</strong></td>
                        <td><span class="status-badge status-native">Native Support</span></td>
                        <td>Useful for scale</td>
                        <td>Hash-based distribution available</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Critical Success Factors -->
        <div class="critical-note">
            <div class="critical-note-title">Critical: Deduplication Quality</div>
            <div class="critical-note-text">
                While ExtraHop can handle some duplicate packets (within 1ms and concurrent), out-of-order duplicates from multiple TAPs 
                will be misinterpreted as TCP retransmissions, leading to false performance degradation alerts. Arista DANZ deduplication 
                is strongly recommended to maintain metric integrity and reduce processing overhead.
            </div>
        </div>

        <div class="success-note">
            <div class="success-note-title">Arista Strengths for ExtraHop Integration</div>
            <div class="success-note-text">
                • Native hardware deduplication at line rate<br>
                • Efficient fan-out to multiple ExtraHop appliances<br>
                • Flexible packet slicing for storage optimization<br>
                • Single vendor for network + broker layers (simplified support)<br>
                • Cost-effective compared to specialized NPB vendors
            </div>
        </div>

        <!-- Workflow Section -->
        <div class="workflow-section">
            <div class="workflow-title">ExtraHop User Workflow (Context)</div>
            
            <div class="workflow-step">
                <div class="workflow-number">1</div>
                <div class="workflow-content">
                    <div class="workflow-action">View Time Series Chart</div>
                    <div class="workflow-detail">User accesses SaaS UI → Queries Sensor for metrics → Visualizes performance data</div>
                </div>
            </div>
            
            <div class="workflow-step">
                <div class="workflow-number">2</div>
                <div class="workflow-content">
                    <div class="workflow-action">Drill Down to Records</div>
                    <div class="workflow-detail">Click data point → Query data lake → View detailed flow Records</div>
                </div>
            </div>
            
            <div class="workflow-step">
                <div class="workflow-number">3</div>
                <div class="workflow-content">
                    <div class="workflow-action">Retrieve Packets (if needed)</div>
                    <div class="workflow-detail">System builds BPF filter → Queries Packetstore → Sensor provides decryption keys → Returns PCAP</div>
                </div>
            </div>
        </div>

        <!-- Optimization Recommendations -->
        <div class="optimization-section">
            <h3 class="optimization-title">Optimization Recommendations</h3>
            
            <div class="optimization-grid">
                <div class="optimization-column">
                    <h4>Traffic to Sensor:</h4>
                    <ul>
                        <li>• Apply deduplication</li>
                        <li>• Keep all production flows intact</li>
                        <li>• No packet slicing allowed</li>
                    </ul>
                </div>
                
                <div class="optimization-column">
                    <h4>Traffic to Packetstore:</h4>
                    <ul>
                        <li>• Consider filtering encrypted 3rd party traffic</li>
                        <li>• Slice low-value packets (headers only)</li>
                        <li>• Skip backup/replication traffic</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Summary Box -->
        <div class="summary-box">
            <h3 class="summary-title">Bottom Line: Arista + ExtraHop Viability</h3>
            <p class="summary-content">
                <strong>Arista DANZ successfully fulfills both network and broker roles for ExtraHop deployments.</strong> 
                The critical capabilities (deduplication, fan-out, filtering, slicing) are natively supported and align well 
                with ExtraHop's requirements. The single-vendor approach simplifies operations and provides cost advantages 
                while delivering the essential functionality needed for effective network visibility and analysis.
            </p>
            <p class="summary-note">
                Arista's native capabilities meet ExtraHop's core requirements, making this a viable and efficient architecture 
                for comprehensive network monitoring and security analysis.
            </p>
        </div>
    </div>
</body>
</html>